# -*- coding: utf-8 -*-
import os

# Form implementation generated from reading ui file 'C:/Users/yw980/code/classManager/UI/StuAddSingle.ui'
#
# Created by: PyQt5 UI code generator 5.15.10
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PySide6 import QtCore, QtGui, QtWidgets
from PySide6.QtWidgets import QFileDialog
from Functions.SQLConnect import SQLConnect
import pymysql


class Ui_StuAddSingle(object):
    def setupUi(self, StuAddSingle):
        StuAddSingle.setObjectName("StuAddSingle")
        StuAddSingle.resize(1400, 900)
        self.layoutWidget = QtWidgets.QWidget(StuAddSingle)
        self.layoutWidget.setGeometry(QtCore.QRect(130, 60, 1071, 641))
        self.layoutWidget.setObjectName("layoutWidget")
        self.gridLayout = QtWidgets.QGridLayout(self.layoutWidget)
        self.gridLayout.setContentsMargins(0, 0, 0, 0)
        self.gridLayout.setObjectName("gridLayout")
        self.verticalLayout = QtWidgets.QVBoxLayout()
        self.verticalLayout.setObjectName("verticalLayout")
        self.PictureLabel = ImageLabel(self.layoutWidget)
        self.PictureLabel.setObjectName("PictureLabel")
        self.verticalLayout.addWidget(self.PictureLabel)
        self.uploadPicButton = PushButton(self.layoutWidget)
        self.uploadPicButton.setObjectName("uploadPicButton")
        self.verticalLayout.addWidget(self.uploadPicButton)
        self.gridLayout.addLayout(self.verticalLayout, 0, 0, 2, 1)
        self.horizontalLayout_9 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_9.setObjectName("horizontalLayout_9")
        self.stuLabel = BodyLabel(self.layoutWidget)
        self.stuLabel.setObjectName("stuLabel")
        self.horizontalLayout_9.addWidget(self.stuLabel)
        self.stuName = LineEdit(self.layoutWidget)
        self.stuName.setObjectName("stuName")
        self.horizontalLayout_9.addWidget(self.stuName)
        self.gridLayout.addLayout(self.horizontalLayout_9, 0, 1, 1, 1)
        self.horizontalLayout_10 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_10.setObjectName("horizontalLayout_10")
        self.bodyLabel_3 = BodyLabel(self.layoutWidget)
        self.bodyLabel_3.setObjectName("bodyLabel_3")
        self.horizontalLayout_10.addWidget(self.bodyLabel_3)
        self.stuBirthAddress = LineEdit(self.layoutWidget)
        self.stuBirthAddress.setObjectName("stuBirthAddress")
        self.horizontalLayout_10.addWidget(self.stuBirthAddress)
        self.gridLayout.addLayout(self.horizontalLayout_10, 0, 2, 1, 1)
        self.horizontalLayout_8 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_8.setObjectName("horizontalLayout_8")
        self.sexLabel = BodyLabel(self.layoutWidget)
        self.sexLabel.setObjectName("sexLabel")
        self.horizontalLayout_8.addWidget(self.sexLabel)
        self.stuSex = ComboBox(self.layoutWidget)
        self.stuSex.setObjectName("stuSex")
        self.horizontalLayout_8.addWidget(self.stuSex)
        self.gridLayout.addLayout(self.horizontalLayout_8, 1, 1, 1, 1)
        self.horizontalLayout_11 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_11.setObjectName("horizontalLayout_11")
        self.bodyLabel_4 = BodyLabel(self.layoutWidget)
        self.bodyLabel_4.setObjectName("bodyLabel_4")
        self.horizontalLayout_11.addWidget(self.bodyLabel_4)
        self.Country = EditableComboBox(self.layoutWidget)
        self.Country.setObjectName("Country")
        self.horizontalLayout_11.addWidget(self.Country)
        self.gridLayout.addLayout(self.horizontalLayout_11, 1, 2, 1, 1)
        self.horizontalLayout_7 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_7.setObjectName("horizontalLayout_7")
        self.bodyLabel = BodyLabel(self.layoutWidget)
        self.bodyLabel.setObjectName("bodyLabel")
        self.horizontalLayout_7.addWidget(self.bodyLabel)
        self.stuIDCard = LineEdit(self.layoutWidget)
        self.stuIDCard.setObjectName("stuIDCard")
        self.horizontalLayout_7.addWidget(self.stuIDCard)
        self.gridLayout.addLayout(self.horizontalLayout_7, 2, 1, 1, 1)
        self.horizontalLayout_12 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_12.setObjectName("horizontalLayout_12")
        self.bodyLabel_5 = BodyLabel(self.layoutWidget)
        self.bodyLabel_5.setObjectName("bodyLabel_5")
        self.horizontalLayout_12.addWidget(self.bodyLabel_5)
        self.Nation = EditableComboBox(self.layoutWidget)
        self.Nation.setObjectName("Nation")
        self.horizontalLayout_12.addWidget(self.Nation)
        self.gridLayout.addLayout(self.horizontalLayout_12, 2, 2, 1, 1)
        self.horizontalLayout_6 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_6.setObjectName("horizontalLayout_6")
        self.bodyLabel_2 = BodyLabel(self.layoutWidget)
        self.bodyLabel_2.setObjectName("bodyLabel_2")
        self.horizontalLayout_6.addWidget(self.bodyLabel_2)
        self.stuIDAddress = LineEdit(self.layoutWidget)
        self.stuIDAddress.setObjectName("stuIDAddress")
        self.horizontalLayout_6.addWidget(self.stuIDAddress)
        self.gridLayout.addLayout(self.horizontalLayout_6, 3, 1, 1, 1)
        self.horizontalLayout_5 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_5.setObjectName("horizontalLayout_5")
        self.bodyLabel_6 = BodyLabel(self.layoutWidget)
        self.bodyLabel_6.setObjectName("bodyLabel_6")
        self.horizontalLayout_5.addWidget(self.bodyLabel_6)
        self.faName = LineEdit(self.layoutWidget)
        self.faName.setObjectName("faName")
        self.horizontalLayout_5.addWidget(self.faName)
        self.gridLayout.addLayout(self.horizontalLayout_5, 4, 1, 1, 1)
        self.horizontalLayout_13 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_13.setObjectName("horizontalLayout_13")
        self.bodyLabel_7 = BodyLabel(self.layoutWidget)
        self.bodyLabel_7.setObjectName("bodyLabel_7")
        self.horizontalLayout_13.addWidget(self.bodyLabel_7)
        self.moName = LineEdit(self.layoutWidget)
        self.moName.setObjectName("moName")
        self.horizontalLayout_13.addWidget(self.moName)
        self.gridLayout.addLayout(self.horizontalLayout_13, 4, 2, 1, 1)
        self.horizontalLayout_4 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_4.setObjectName("horizontalLayout_4")
        self.bodyLabel_8 = BodyLabel(self.layoutWidget)
        self.bodyLabel_8.setObjectName("bodyLabel_8")
        self.horizontalLayout_4.addWidget(self.bodyLabel_8)
        self.faIDCard = LineEdit(self.layoutWidget)
        self.faIDCard.setObjectName("faIDCard")
        self.horizontalLayout_4.addWidget(self.faIDCard)
        self.gridLayout.addLayout(self.horizontalLayout_4, 5, 1, 1, 1)
        self.horizontalLayout_3 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_3.setObjectName("horizontalLayout_3")
        self.bodyLabel_9 = BodyLabel(self.layoutWidget)
        self.bodyLabel_9.setObjectName("bodyLabel_9")
        self.horizontalLayout_3.addWidget(self.bodyLabel_9)
        self.moIDCard = LineEdit(self.layoutWidget)
        self.moIDCard.setObjectName("moIDCard")
        self.horizontalLayout_3.addWidget(self.moIDCard)
        self.gridLayout.addLayout(self.horizontalLayout_3, 5, 2, 1, 1)
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.bodyLabel_10 = BodyLabel(self.layoutWidget)
        self.bodyLabel_10.setObjectName("bodyLabel_10")
        self.horizontalLayout_2.addWidget(self.bodyLabel_10)
        self.faTelecom = LineEdit(self.layoutWidget)
        self.faTelecom.setObjectName("faTelecom")
        self.horizontalLayout_2.addWidget(self.faTelecom)
        self.gridLayout.addLayout(self.horizontalLayout_2, 6, 1, 1, 1)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.bodyLabel_11 = BodyLabel(self.layoutWidget)
        self.bodyLabel_11.setObjectName("bodyLabel_11")
        self.horizontalLayout.addWidget(self.bodyLabel_11)
        self.moTelecom = LineEdit(self.layoutWidget)
        self.moTelecom.setObjectName("moTelecom")
        self.horizontalLayout.addWidget(self.moTelecom)
        self.gridLayout.addLayout(self.horizontalLayout, 6, 2, 1, 1)
        self.layoutWidget1 = QtWidgets.QWidget(StuAddSingle)
        self.layoutWidget1.setGeometry(QtCore.QRect(390, 780, 511, 41))
        self.layoutWidget1.setObjectName("layoutWidget1")
        self.horizontalLayout_14 = QtWidgets.QHBoxLayout(self.layoutWidget1)
        self.horizontalLayout_14.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_14.setObjectName("horizontalLayout_14")
        # self.uploadButton_2 = PrimaryPushButton(self.layoutWidget1)
        # self.uploadButton_2.setObjectName("uploadButton_2")
        # self.horizontalLayout_14.addWidget(self.uploadButton_2)
        self.uploadButton = PrimaryPushButton(self.layoutWidget1)
        self.uploadButton.setObjectName("uploadButton")
        self.horizontalLayout_14.addWidget(self.uploadButton)
        self.clearButton = PrimaryPushButton(self.layoutWidget1)
        self.clearButton.setObjectName("clearButton")
        self.horizontalLayout_14.addWidget(self.clearButton)
        self.returnButton = PrimaryPushButton(self.layoutWidget1)
        self.returnButton.setObjectName("returnButton")
        self.horizontalLayout_14.addWidget(self.returnButton)
        self.stuSex.addItems("男 女".split())

        self.retranslateUi(StuAddSingle)
        self.uploadPicButton.clicked.connect(StuAddSingle.uploadPic)
        self.uploadButton.clicked.connect(StuAddSingle.uploadData)
        self.clearButton.clicked.connect(StuAddSingle.clear)
        self.returnButton.clicked.connect(StuAddSingle.returnWindow)
        QtCore.QMetaObject.connectSlotsByName(StuAddSingle)

    def retranslateUi(self, StuAddSingle):
        _translate = QtCore.QCoreApplication.translate
        StuAddSingle.setWindowTitle(_translate("StuAddSingle", "学籍管理系统"))
        self.uploadPicButton.setText(_translate("StuAddSingle", "上传照片"))
        self.stuLabel.setText(_translate("StuAddSingle", "幼儿姓名："))
        self.bodyLabel_3.setText(_translate("StuAddSingle", "出生地"))
        self.sexLabel.setText(_translate("StuAddSingle", "性别:"))
        self.bodyLabel_4.setText(_translate("StuAddSingle", "国籍"))
        self.bodyLabel.setText(_translate("StuAddSingle", "身份证号码"))
        self.bodyLabel_5.setText(_translate("StuAddSingle", "民族"))
        self.bodyLabel_2.setText(_translate("StuAddSingle", "户籍地址"))
        self.bodyLabel_6.setText(_translate("StuAddSingle", "父亲姓名"))
        self.bodyLabel_7.setText(_translate("StuAddSingle", "母亲姓名"))
        self.bodyLabel_8.setText(_translate("StuAddSingle", "父亲身份证"))
        self.bodyLabel_9.setText(_translate("StuAddSingle", "母亲身份证"))
        self.bodyLabel_10.setText(_translate("StuAddSingle", "父亲联系号码"))
        self.bodyLabel_11.setText(_translate("StuAddSingle", "母亲联系号码"))
        # self.uploadButton_2.setText(_translate("StuAddSingle", "批量添加"))
        self.uploadButton.setText(_translate("StuAddSingle", "提交"))
        self.clearButton.setText(_translate("StuAddSingle", "清除"))
        self.returnButton.setText(_translate("StuAddSingle", "关闭"))


    def uploadPic(self):
        self.picPath = self.openFileDialog()
        self.PictureLabel .setPixmap(self.picPath)

        self.PictureLabel .show()


    def openFileDialog(self):
        fileName, _ = QFileDialog.getOpenFileName(self, "Open Image", "",
                                                  "Image Files (*.png *.jpg *jpeg *.bmp)")
        return fileName

    def uploadData(self):
        name = self.stuName.text()
        address = self.stuBirthAddress.text()
        sex = self.stuSex.text()
        idCard = self.stuIDCard.text()
        birthday = idCard[6:14]
        nation = self.Nation.text()
        country = self.Country.text()
        idAddress = self.stuIDAddress.text()
        faName = self.faName.text()
        moName = self.moName.text()
        faIDCard = self.faIDCard.text()
        moIDCard = self.moIDCard.text()
        faTelecom = self.faTelecom.text()
        moTelecom = self.moTelecom.text()
        stuid = "G" + idCard
        data = [stuid, name, sex, birthday, idCard, address, moName, moIDCard, faName, faIDCard, moTelecom, faTelecom,
                idAddress]
        sql = SQLConnect(os.environ.get('MYSQL_USER'), os.environ.get('MYSQL_PASSWORD'))
        sql.connect()
        try:
            sql.uploadStudentData(data)

        except pymysql.MySQLError as e:
            print(f"Failed to connect to database: {e}")
            QtWidgets.QMessageBox.information(self, "提示", "连接失败")

    def clear(self):
        self.stuName.clear()
        self.stuBirthAddress.clear()
        self.stuIDCard.clear()
        self.stuIDAddress.clear()
        self.faName.clear()
        self.moName.clear()
        self.faIDCard.clear()
        self.moIDCard.clear()
        self.faTelecom.clear()
        self.moTelecom.clear()
        self.PictureLabel.clear()

    def returnWindow(self):
        self.close()


from qfluentwidgets import BodyLabel, ComboBox, EditableComboBox, ImageLabel, LineEdit, PrimaryPushButton, PushButton
